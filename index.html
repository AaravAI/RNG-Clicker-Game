<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>RNG Clicker ‚Äî Main + Event Box</title>
    <meta name="description" content="RNG Clicker ‚Äî hatch skins from Main & Event boxes, stack PPC, rebirth for more equip slots. Autosave, offline progress." />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
      html,body,#root{height:100%;background:#08090b} *{box-sizing:border-box}
      .bg-grid{background-image:radial-gradient(rgba(255,255,255,.04) 1px,transparent 1px);background-size:24px 24px}
      .glass{backdrop-filter:blur(10px);background:rgba(16,16,20,.55)}
      .btn{transition:transform .06s ease,box-shadow .2s ease,opacity .2s ease;box-shadow:0 8px 24px rgba(0,0,0,.35),inset 0 0 0 1px rgba(255,255,255,.04)}
      .btn:active{transform:translateY(1px) scale(.995)}
      .btn-emerald{background:linear-gradient(180deg,#34d399,#059669)}
      .btn-sky{background:linear-gradient(180deg,#38bdf8,#0284c7)}
      .btn-rose{background:linear-gradient(180deg,#fb7185,#be123c)}
      .btn-fuchsia{background:linear-gradient(180deg,#e879f9,#a21caf)}
      .btn-amber{background:linear-gradient(180deg,#fbbf24,#b45309);color:#111827}
      .section{background:rgba(24,24,30,.65);border:1px solid rgba(120,120,140,.25)}
      .chip{background:rgba(20,20,26,.8);border:1px solid rgba(120,120,140,.25)}
      .hero-gradient{background:radial-gradient(1200px 600px at 20% -20%, #1f2937 0%, transparent 60%),radial-gradient(1000px 500px at 120% 10%, #0ea5e9 0%, transparent 45%),radial-gradient(900px 600px at 50% 120%, #a78bfa 0%, transparent 45%),linear-gradient(180deg, #0b0f14 0%, #090a0e 100%)}
      @keyframes pop{0%{transform:scale(.9);opacity:0}60%{transform:scale(1.02);opacity:1}100%{transform:scale(1)}}
      .pop{animation:pop .35s ease both}
      @keyframes floatUp{0%{transform:translateY(0) scale(1);opacity:1}70%{opacity:.9}100%{transform:translateY(-80px) scale(.96);opacity:0}}
      .particle{position:absolute;pointer-events:none;color:#faffff;font-weight:700;text-shadow:0 1px 0 rgba(0,0,0,.5);animation:floatUp 800ms ease forwards}
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const {useState,useEffect,useMemo} = React;

      /* ---------- utils ---------- */
      const UNITS=[{value:1e33,suffix:"Dc"},{value:1e30,suffix:"No"},{value:1e27,suffix:"Oc"},{value:1e24,suffix:"Sp"},{value:1e21,suffix:"Sx"},{value:1e18,suffix:"Qi"},{value:1e15,suffix:"Qa"},{value:1e12,suffix:"T"},{value:1e9,suffix:"B"},{value:1e6,suffix:"M"},{value:1e3,suffix:"k"}];
      const clamp2=x=>Math.round(x*100)/100;
      function fmt(n){if(!isFinite(n))return"‚àû";const a=Math.abs(n);for(const u of UNITS)if(a>=u.value)return(n/u.value).toFixed(2).replace(/\.00$/,"")+u.suffix;return Math.floor(n).toString()}
      function toRoman(num){if(num<=0)return"";const R=[[1000,'M'],[900,'CM'],[500,'D'],[400,'CD'],[100,'C'],[90,'XC'],[50,'L'],[40,'XL'],[10,'X'],[9,'IX'],[5,'V'],[4,'IV'],[1,'I']];let s='';for(const[v,t]of R){while(num>=v){s+=t;num-=v}}return s}
      function roll(table){const total=table.reduce((a,t)=>a+t.chance,0);let r=Math.random()*total,acc=0;for(const it of table){acc+=it.chance;if(r<acc)return it.rarity}return table[table.length-1].rarity}
      function spawnParticle(e,txt){const p=document.createElement("div");p.className="particle";p.style.left=e.clientX+"px";p.style.top=e.clientY+"px";p.textContent=txt;document.body.appendChild(p);setTimeout(()=>p.remove(),900)}

      /* ---------- data ---------- */
      const MAIN_BOX={cost:100,rng:[
        {rarity:"Common",chance:79.89899},
        {rarity:"Rare",chance:15},
        {rarity:"Epic",chance:4},
        {rarity:"Legendary",chance:1},
        {rarity:"Mythic",chance:0.1},
        {rarity:"Unique",chance:0.001},
        {rarity:"Impossible",chance:0.00001}
      ]};
      const EVENT_BOX={cost:100,tokenCost:1000,rng:[
        {rarity:"Nothing",chance:98.99},
        {rarity:"Event",chance:1},
        {rarity:"Special Event",chance:0.01}
      ]};
      const SKIN={
        name:"Skin",
        base:{Common:1,Rare:2,Epic:3,Legendary:4,Mythic:5,Unique:10,Impossible:30,Event:15,"Special Event":20},
        gain:{Common:1,Rare:2,Epic:3,Legendary:4,Mythic:5,Unique:10,Impossible:30,Event:15,"Special Event":20},
        colors:{Common:"#9CA3AF",Rare:"#3B82F6",Epic:"#8B5CF6",Legendary:"#F59E0B",Mythic:"#EF4444",Unique:"#7C3AED",Impossible:"#FFFFFF",Event:"#22c55e","Special Event":"#0ea5e9",Nothing:"#6b7280"}
      };
      const DISPLAY_RATES_MAIN=[{r:"Common",p:"79.799%"},{r:"Rare",p:"15%"},{r:"Epic",p:"4%"},{r:"Legendary",p:"1%"},{r:"Mythic",p:"0.1%"},{r:"Unique",p:"0.001%"},{r:"Impossible",p:"0.00001%"}];
      const DISPLAY_RATES_EVENT=[{r:"Nothing",p:"99%"},{r:"Event",p:"1%"},{r:"Special Event",p:"0.01%"}];

      /* ---------- storage (single-slot, no login) ---------- */
      const SAVE_VERSION="rng_clicker_nologin_v1";
      const LS_KEY="rng_clicker_"+SAVE_VERSION;
      const defState={
        points:0,totalClicks:0,
        autoClickerLevel:0,
        autoOpenerActive:false,
        autoOpenerLevel:0,          // boxes per batch = 1 + level
        autoOpenerSpeedLevel:0,     // 0:1s, 1:0.5s, 2:0.25s, 3:0.25s (MAX)
        autoOpenerMode:"main",
        lastSeen:Date.now(),
        inventory:[], invCap:100, invUpgrades:0,
        rebirths:0,
        eventTokens:0,
        showHelp:true,
        autoDelete:{Common:false,Rare:false,Epic:false,Legendary:false,Mythic:false},
      };
      const saveState=s=>{ try{localStorage.setItem(LS_KEY,JSON.stringify(s))}catch{} };
      const loadState=()=>{ try{const raw=localStorage.getItem(LS_KEY); if(raw) return {...defState,...JSON.parse(raw)} }catch{}; return {...defState}; };

      /* ---------- math ---------- */
      const skinUpgradeCost=l=>10**(l+2);     // 100,1k,10k...
      const costAuto=l=>10**(l+2);           // autoclicker (cap 6)
      const costInv=n=>10**(n+2);            // +20 slots
      const costReb=n=>10**(n+2);            // +1 equip
      const costRate=l=>10**(l+2);           // opener rate
      function costSpeed(l){ if(l===0) return 1e3; if(l===1) return 1e6; if(l===2) return 1e8; return Infinity; } // 1k ‚Üí 1M ‚Üí 100M
      const speedInterval=l=> (l<=0?1 : l===1?0.5 : 0.25); // seconds; Lv3 stays 0.25
      const autoInt=l=>60/2**Math.min(l,6); const autoPerMin=l=>2**Math.min(l,6);
      const openRate=l=>1+l;
      const skinPpc=it=>SKIN.base[it.rarity]+SKIN.gain[it.rarity]*it.level;
      function equippedBest(inv,slots){
        const c=[]; for(const it of inv){const p=skinPpc(it); for(let k=0;k<it.qty;k++) c.push({rarity:it.rarity,level:it.level,ppc:p});}
        c.sort((a,b)=>b.ppc-a.ppc); const ch=c.slice(0,Math.max(1,slots));
        return{ppc:ch.reduce((a,e)=>a+e.ppc,0),label:ch.map(e=>`${e.rarity} ${SKIN.name} (${toRoman(e.level)||'I'}) +${e.ppc}`).join(" + ")};
      }

      /* ---------- Cover (simple Start Playing) ---------- */
      function Cover({onStart}){
        return (
          <div className="fixed inset-0 z-50 hero-gradient bg-grid text-zinc-100 overflow-y-auto">
            <div className="max-w-6xl mx-auto px-6 py-12">
              <div className="grid lg:grid-cols-2 gap-8 items-start">
                <div className="relative">
                  <div className="relative rounded-3xl p-8 glass border border-zinc-700/60">
                    <div className="text-xs tracking-widest uppercase text-zinc-400">Idle RNG ‚Ä¢ Clicker ‚Ä¢ Autosave</div>
                    <h1 className="mt-2 text-5xl font-extrabold leading-tight">RNG Clicker</h1>
                    <p className="mt-3 text-zinc-300">
                      Click the big box to earn points. Spend points to open the <b>Main Box</b> (regular skins) or the <b>Event Box</b> (Event &amp; Special skins).
                      Skins add to your <b>Points Per Click (PPC)</b>. Upgrade skins to boost power, and <b>Rebirth</b> to equip more skins at once.
                      Turn on the <b>Auto-Opener</b> to open boxes automatically while you keep clicking. Autosaves locally.
                    </p>

                    <div className="mt-5 section rounded-2xl p-4">
                      <div className="text-sm font-semibold">Main Box ‚Äî Drop Rates</div>
                      <div className="mt-3 grid grid-cols-7 gap-2 text-center text-xs">
                        {DISPLAY_RATES_MAIN.map(x=>(
                          <div key={x.r} className="rounded-xl p-3 chip">
                            <div className="w-5 h-5 mx-auto rounded-full" style={{background: SKIN.colors[x.r]}}></div>
                            <div className="mt-1 font-semibold">{x.r}</div>
                            <div className="text-zinc-400">{x.p}</div>
                          </div>
                        ))}
                      </div>
                      <div className="mt-2 text-[12px] text-zinc-400">
                        Power per copy: C +1, R +2, E +3, L +4, M +5, U +10, IMP +30. Event +15, Special Event +20.
                      </div>
                    </div>

                    <div className="mt-4 section rounded-2xl p-4">
                      <div className="text-sm font-semibold">Event Box ‚Äî Drop Rates</div>
                      <div className="mt-3 grid grid-cols-3 gap-2 text-center text-xs">
                        {DISPLAY_RATES_EVENT.map(x=>(
                          <div key={x.r} className="rounded-xl p-3 chip">
                            <div className="w-5 h-5 mx-auto rounded-full" style={{background: SKIN.colors[x.r]}}></div>
                            <div className="mt-1 font-semibold">{x.r}</div>
                            <div className="text-zinc-400">{x.p}</div>
                          </div>
                        ))}
                      </div>
                      <div className="mt-2 text-[12px] text-zinc-400">
                        Event Box costs <b>100 points + 1 token</b>. Tokens cost <b>1,000 points</b>.
                      </div>
                    </div>

                    <button className="mt-6 btn btn-emerald px-5 py-2.5 rounded-xl" onClick={onStart}>Start Playing</button>
                  </div>
                </div>

                <div className="relative">
                  <div className="relative rounded-[28px] border border-zinc-700/70 overflow-hidden glass">
                    <div className="p-6">
                      <div className="text-sm font-semibold">Upgrades you can buy</div>
                      <ul className="mt-2 text-sm text-zinc-300 space-y-1.5">
                        <li>‚Ä¢ <b>Autoclicker</b> ‚Äî passive points (never pauses).</li>
                        <li>‚Ä¢ <b>Auto-Opener</b> ‚Äî opens boxes automatically. <span className="text-zinc-400">Stop: CTRL+5</span></li>
                        <li>‚Ä¢ <b>Auto-Opener Speed</b> ‚Äî Lv0: 1s, Lv1: 0.5s, Lv2/3: 0.25s (costs 1k ‚Üí 1M ‚Üí 100M).</li>
                        <li>‚Ä¢ <b>Auto-Opener Rate</b> ‚Äî more boxes per batch.</li>
                        <li>‚Ä¢ <b>Expand Inventory</b> ‚Äî +20 slots each time.</li>
                        <li>‚Ä¢ <b>Rebirth</b> ‚Äî +1 equip slot.</li>
                        <li>‚Ä¢ <b>Auto-Delete</b> ‚Äî optionally bin fresh Common‚ÜíMythic drops (refund 20%).</li>
                      </ul>
                      <div className="mt-2 text-[12px] text-zinc-400">Most upgrade tracks follow 100 ‚Üí 1k ‚Üí 10k ‚Üí ‚Ä¶ (10^(n+2)).</div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        );
      }

      /* ---------- App (single-slot) ---------- */
      function App(){
        const [state,setState]=useState(loadState());
        const [showCover,setShowCover]=useState(true);
        const equipped=useMemo(()=>equippedBest(state.inventory,state.rebirths+1),[state.inventory,state.rebirths]);
        const ppc=useMemo(()=>1+equipped.ppc,[equipped]);

        // autosave
        useEffect(()=>{saveState(state)},[state]);
        useEffect(()=>{const id=setInterval(()=>saveState(state),5000);return()=>clearInterval(id)},[state]);
        useEffect(()=>{const h=()=>saveState(state);window.addEventListener("beforeunload",h);return()=>window.removeEventListener("beforeunload",h)},[state]);

        // OFFLINE catch-up
        useEffect(()=>{
          const now=Date.now(); const elapsed=(now-state.lastSeen)/1000; if(elapsed<=1) return;
          let pts=state.points, inv=[...state.inventory], tokens=state.eventTokens;

          // autoclicker always accrues
          const acInt=autoInt(state.autoClickerLevel); pts+=Math.floor(elapsed/acInt);

          // auto-opener ticks (respect mode, cost, tokens, cap)
          if(state.autoOpenerActive){
            const rate=openRate(state.autoOpenerLevel);
            const intv=speedInterval(state.autoOpenerSpeedLevel);
            let ticks=Math.floor(elapsed/intv), ops=ticks*rate;
            while(ops-- > 0){
              const cnt=inv.reduce((a,i)=>a+i.qty,0);
              if(state.autoOpenerMode==="main"){
                if(pts<MAIN_BOX.cost||cnt>=state.invCap) break;
                pts-=MAIN_BOX.cost; const r=roll(MAIN_BOX.rng);
                if(state.autoDelete[r]){pts+=Math.floor(MAIN_BOX.cost*0.2);}
                else{const idx=inv.findIndex(i=>i.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});}
              }else{
                if(tokens<=0||pts<EVENT_BOX.cost||cnt>=state.invCap) break;
                pts-=EVENT_BOX.cost; tokens-=1; const r=roll(EVENT_BOX.rng);
                if(r!=="Nothing"){const idx=inv.findIndex(i=>i.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});}
              }
            }
          }
          setState(s=>({...s,points:pts,inventory:inv,eventTokens:tokens,lastSeen:now}));
        },[]);

        // online autoclicker (never pauses)
        useEffect(()=>{
          let acc=0; const tick=100;
          const id=setInterval(()=>{ setState(s=>{
            acc+=tick/1000; const intv=autoInt(s.autoClickerLevel);
            let gained=0; while(acc>=intv){gained++; acc-=intv;}
            if(gained===0) return s; return {...s,points:s.points+gained,lastSeen:Date.now()};
          }) },tick);
          return()=>clearInterval(id);
        },[]);

        // auto-opener loop (online)
        useEffect(()=>{
          if(!state.autoOpenerActive) return;
          const ms=speedInterval(state.autoOpenerSpeedLevel)*1000;
          const id=setInterval(()=>{
            setState(s=>{
              const rate=openRate(s.autoOpenerLevel);
              let pts=s.points, inv=[...s.inventory], tokens=s.eventTokens;
              for(let i=0;i<rate;i++){
                const cnt=inv.reduce((a,i)=>a+i.qty,0);
                if(cnt>=s.invCap) return {...s,autoOpenerActive:false};
                if(s.autoOpenerMode==="main"){
                  if(pts<MAIN_BOX.cost) return {...s,autoOpenerActive:false};
                  pts-=MAIN_BOX.cost; const r=roll(MAIN_BOX.rng);
                  if(s.autoDelete[r]){pts+=Math.floor(MAIN_BOX.cost*0.2);}
                  else{const idx=inv.findIndex(it=>it.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});}
                }else{
                  if(tokens<=0 || pts<EVENT_BOX.cost) return {...s,autoOpenerActive:false};
                  pts-=EVENT_BOX.cost; tokens-=1; const r=roll(EVENT_BOX.rng);
                  if(r!=="Nothing"){const idx=inv.findIndex(it=>it.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});}
                }
              }
              return {...s,points:pts,inventory:inv,eventTokens:tokens,lastSeen:Date.now()};
            });
          },ms);
          return()=>clearInterval(id);
        },[state.autoOpenerActive,state.autoOpenerLevel,state.autoOpenerSpeedLevel,state.autoOpenerMode]);

        /* ---------- actions ---------- */
        const clickPlay=e=>{ setState(s=>({...s,points:s.points+ppc,totalClicks:s.totalClicks+1})); if(e) spawnParticle(e,`+${ppc}`); };
        const openMain=()=>setState(s=>{
          const cnt=s.inventory.reduce((a,i)=>a+i.qty,0); if(s.points<MAIN_BOX.cost||cnt>=s.invCap) return s;
          let pts=s.points-MAIN_BOX.cost; const r=roll(MAIN_BOX.rng);
          if(s.autoDelete[r]){pts+=Math.floor(MAIN_BOX.cost*0.2); return {...s,points:pts};}
          const inv=[...s.inventory]; const idx=inv.findIndex(i=>i.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});
          return {...s,points:pts,inventory:inv};
        });
        const openEvent=()=>setState(s=>{
          const cnt=s.inventory.reduce((a,i)=>a+i.qty,0); if(s.eventTokens<=0||s.points<EVENT_BOX.cost||cnt>=s.invCap) return s;
          let pts=s.points-EVENT_BOX.cost; let tok=s.eventTokens-1; const r=roll(EVENT_BOX.rng);
          if(r==="Nothing") return {...s,points:pts,eventTokens:tok};
          const inv=[...s.inventory]; const idx=inv.findIndex(i=>i.rarity===r); if(idx>=0) inv[idx]={...inv[idx],qty:inv[idx].qty+1}; else inv.push({rarity:r,level:0,qty:1});
          return {...s,points:pts,eventTokens:tok,inventory:inv};
        });
        const buyToken=()=>setState(s=> s.points>=EVENT_BOX.tokenCost?{...s,points:s.points-EVENT_BOX.tokenCost,eventTokens:s.eventTokens+1}:s);

        const upgradeSkin=it=>{
          const cost=skinUpgradeCost(it.level);
          setState(s=>{
            if(s.points<cost) return s;
            const inv=[...s.inventory]; const idx=inv.findIndex(x=>x.rarity===it.rarity); if(idx<0) return s;
            inv[idx]={...inv[idx],level:inv[idx].level+1}; return {...s,points:s.points-cost,inventory:inv};
          });
        };
        const deletePets=it=>{
          const max=it.qty; const n=prompt(`Delete how many ${it.rarity} ${SKIN.name}? (0‚Äì${max})`,"1");
          if(n===null) return; const k=Math.max(0,Math.min(max,Math.floor(Number(n)||0))); if(k<=0) return;
          const each=Math.floor(MAIN_BOX.cost*0.2);
          if(!confirm(`Confirm delete ${k}? You‚Äôll get ${fmt(each*k)} points.`)) return;
          setState(s=>{const inv=[...s.inventory]; const idx=inv.findIndex(x=>x.rarity===it.rarity); if(idx<0) return s; const left=inv[idx].qty-k; if(left<=0) inv.splice(idx,1); else inv[idx]={...inv[idx],qty:left}; return {...s,points:s.points+each*k,inventory:inv};});
        };

        const upgradeAuto=()=>setState(s=> (s.autoClickerLevel>=6||s.points<costAuto(s.autoClickerLevel))?s:{...s,points:s.points-costAuto(s.autoClickerLevel),autoClickerLevel:s.autoClickerLevel+1});
        const upgradeRate=()=>setState(s=> s.points<costRate(s.autoOpenerLevel)?s:{...s,points:s.points-costRate(s.autoOpenerLevel),autoOpenerLevel:s.autoOpenerLevel+1});
        const upgradeSpeed=()=>setState(s=> (s.autoOpenerSpeedLevel>=3||s.points<costSpeed(s.autoOpenerSpeedLevel))?s:{...s,points:s.points-costSpeed(s.autoOpenerSpeedLevel),autoOpenerSpeedLevel:s.autoOpenerSpeedLevel+1});
        const expandInv=()=>setState(s=> s.points<costInv(s.invUpgrades)?s:{...s,points:s.points-costInv(s.invUpgrades),invCap:s.invCap+20,invUpgrades:s.invUpgrades+1});
        const rebirth=()=>setState(s=> s.points<costReb(s.rebirths)?s:{...s,points:0,rebirths:s.rebirths+1});

        // Export / Import helpers
        function doExport(){
          const raw=JSON.stringify(state);
          const blob=new Blob([raw],{type:"application/json"});
          const url=URL.createObjectURL(blob); const a=document.createElement("a");
          a.href=url; a.download="rng_clicker_save.json"; a.click(); URL.revokeObjectURL(url);
        }
        function onImportFile(ev){
          const f=ev.target.files?.[0]; if(!f) return;
          const rdr=new FileReader();
          rdr.onload=()=>{ try{
              const obj=JSON.parse(String(rdr.result||"{}"));
              const merged={...defState,...obj,lastSeen:Date.now()};
              setState(merged); saveState(merged);
              alert("Save imported!");
            }catch{ alert("Invalid save file."); } };
          rdr.readAsText(f);
          ev.target.value="";
        }

        /* ---------- UI ---------- */
        return (
          <div className="w-screen h-screen text-zinc-100 overflow-hidden select-none">
            {state.showHelp && <Cover onStart={()=>setState(s=>({...s,showHelp:false}))} />}

            {/* top bar */}
            <div className="fixed top-0 inset-x-0 p-2 flex items-center justify-between bg-zinc-950/70 backdrop-blur border-b border-zinc-800 z-40">
              <div className="flex items-center gap-2">
                <button className="btn px-3 py-1.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-sm" onClick={()=>setState(s=>({...s,showHelp:true}))}>‚ùì Help</button>
                <div className="flex items-center gap-1 bg-zinc-800/70 border border-zinc-700 rounded-lg px-2 py-1">
                  <span className="text-xs text-zinc-300">Auto-Opener:</span>
                  <label className="text-xs flex items-center gap-1">
                    <input type="radio" name="mode" checked={state.autoOpenerMode==='main'} onChange={()=>setState(s=>({...s,autoOpenerMode:'main'}))}/> Main
                  </label>
                  <label className="text-xs flex items-center gap-1">
                    <input type="radio" name="mode" checked={state.autoOpenerMode==='event'} onChange={()=>setState(s=>({...s,autoOpenerMode:'event'}))}/> Event
                  </label>
                </div>
                <button className={`btn px-3 py-1.5 rounded-lg text-sm ${state.autoOpenerActive? "btn-amber":"btn-emerald"}`}
                        onClick={()=>!state.autoOpenerActive && setState(s=>({...s,autoOpenerActive:true}))}>
                  {state.autoOpenerActive ? "Auto-Opener running‚Ä¶" : "Start Auto-Opener"}
                </button>
                <span className="text-xs text-zinc-400">Stop: CTRL+5</span>
              </div>
              <div className="flex items-center gap-3 text-xs text-zinc-300">
                <span>PPC: <b>{ppc}</b></span>
                <span>‚Ä¢ Auto: every {clamp2(autoInt(state.autoClickerLevel))}s (‚âà {autoPerMin(state.autoClickerLevel)}/min)</span>
                <span>‚Ä¢ Opener: {openRate(state.autoOpenerLevel)} / {clamp2(speedInterval(state.autoOpenerSpeedLevel))}s ({state.autoOpenerMode})</span>
                <span>‚Ä¢ Tokens: {state.eventTokens}</span>
                <span>‚Ä¢ Rebirths: {state.rebirths}</span>
                <span>‚Ä¢ Inv: {state.inventory.reduce((a,i)=>a+i.qty,0)}/{state.invCap}</span>
                <span>‚Ä¢ Points: <b>{fmt(state.points)}</b></span>
                <button className="btn px-3 py-1.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-sm" onClick={doExport}>Export</button>
                <label className="btn px-3 py-1.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-sm cursor-pointer">
                  Import<input type="file" accept="application/json" className="hidden" onChange={onImportFile}/>
                </label>
              </div>
            </div>

            {/* layout */}
            <div className="pt-14 grid grid-cols-5 gap-4 h-full p-4">
              {/* Click Zone */}
              <div className="col-span-3">
                <div className="relative w-full h-full section rounded-2xl overflow-hidden" onClick={(e)=>clickPlay(e)}>
                  <div className="relative h-full flex items-center justify-center">
                    <div className="text-center">
                      <div className="text-6xl font-extrabold drop-shadow">{fmt(state.points)}</div>
                      <div className="text-zinc-400 mt-2">points</div>
                      <div className="mt-6 text-2xl">Click anywhere in this box (+{ppc} per click)</div>
                      <div className="mt-2 text-zinc-400">Equipped: {equipped(state.inventory,state.rebirths+1)?.label || "None"}</div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Right Panel */}
              <div className="col-span-2 h-full min-h-0">
                <div className="h-full overflow-y-auto pr-2 flex flex-col gap-4">

                  {/* Open Boxes */}
                  <div className="section rounded-2xl p-4">
                    <div className="text-xl font-semibold">Open Boxes</div>

                    <div className="mt-2 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Main Box</div>
                        <div className="text-sm text-zinc-400">Cost: {fmt(MAIN_BOX.cost)}</div>
                        <div className="text-xs text-zinc-500 mt-1">C 79.799% ‚Ä¢ R 15% ‚Ä¢ E 4% ‚Ä¢ L 1% ‚Ä¢ M 0.1% ‚Ä¢ U 0.001% ‚Ä¢ IMP 0.00001%</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${(state.points>=MAIN_BOX.cost && state.inventory.reduce((a,i)=>a+i.qty,0)<state.invCap) ? "btn-emerald" : "bg-zinc-700 cursor-not-allowed"}`} onClick={openMain}>Open</button>
                    </div>

                    <div className="mt-2 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Event Box</div>
                        <div className="text-sm text-zinc-400">Cost: {fmt(EVENT_BOX.cost)} + 1 token ‚Ä¢ Tokens: <b>{state.eventTokens}</b></div>
                        <div className="text-xs text-zinc-500 mt-1">Nothing 99% ‚Ä¢ Event 1% ‚Ä¢ Special 0.01%</div>
                      </div>
                      <div className="flex gap-2">
                        <button className={`btn px-3 py-2 rounded-lg text-sm ${(state.points>=EVENT_BOX.cost && state.eventTokens>0 && state.inventory.reduce((a,i)=>a+i.qty,0)<state.invCap) ? "btn-amber" : "bg-zinc-700 cursor-not-allowed"}`} onClick={openEvent}>Open</button>
                        <button className={`btn px-3 py-2 rounded-lg text-sm ${state.points>=EVENT_BOX.tokenCost ? "btn-sky" : "bg-zinc-700 cursor-not-allowed"}`} onClick={buyToken}>Buy Token ({fmt(EVENT_BOX.tokenCost)})</button>
                      </div>
                    </div>

                    <div className="mt-2 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Expand Inventory</div>
                        <div className="text-xs text-zinc-400">+20 slots ‚Ä¢ Next cost {fmt(costInv(state.invUpgrades))}</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${state.points>=costInv(state.invUpgrades) ? "btn-sky" : "bg-zinc-700 cursor-not-allowed"}`} onClick={expandInv}>Buy</button>
                    </div>
                  </div>

                  {/* Inventory (above Upgrades) */}
                  <div className="section rounded-2xl p-4">
                    <div className="flex items-center justify-between">
                      <div className="text-xl font-semibold">Inventory</div>
                      <details className="text-sm">
                        <summary className="cursor-pointer text-zinc-300">Auto-Delete Settings</summary>
                        <div className="mt-2 grid grid-cols-5 gap-2 text-xs">
                          {["Common","Rare","Epic","Legendary","Mythic"].map(r=>(
                            <label key={r} className="flex items-center gap-2 px-2 py-1 rounded-md chip">
                              <input type="checkbox" checked={!!state.autoDelete[r]} onChange={e=>setState(s=>({...s,autoDelete:{...s.autoDelete,[r]:e.target.checked}}))}/>
                              <span>{r}</span>
                            </label>
                          ))}
                        </div>
                        <div className="mt-1 text-[11px] text-zinc-400">Deletes fresh drops only and refunds 20% of Main Box cost.</div>
                      </details>
                    </div>
                    <div className="mt-2 grid grid-cols-1 gap-2">
                      {state.inventory.length===0 && (<div className="text-zinc-400 text-sm">No skins yet. Open boxes!</div>)}
                      {state.inventory.map(it=>{
                        const cost=skinUpgradeCost(it.level); const can=state.points>=cost;
                        return (
                          <div key={it.rarity} className="flex items-center justify-between rounded-xl p-3 chip">
                            <div>
                              <div className="font-medium">{it.rarity} {SKIN.name} <span className="opacity-70">{toRoman(it.level)||'I'}</span></div>
                              <div className="text-xs text-zinc-300">+{skinPpc(it)} PPC ‚Ä¢ Copies {it.qty}</div>
                            </div>
                            <div className="flex items-center gap-2">
                              <button className={`btn px-3 py-2 rounded-lg text-sm ${can? "btn-sky":"bg-zinc-700 cursor-not-allowed"}`} onClick={()=>upgradeSkin(it)}>
                                Upgrade ({fmt(cost)})
                              </button>
                              <button className="px-2 py-1 rounded-md bg-zinc-800 hover:bg-zinc-700 text-xs" title="Delete copies" onClick={()=>deletePets(it)}>üóëÔ∏è</button>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  {/* Upgrades */}
                  <div className="section rounded-2xl p-4">
                    <div className="text-xl font-semibold">Upgrades</div>

                    <div className="mt-3 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Autoclicker Lv {state.autoClickerLevel} {state.autoClickerLevel>=6 && "(MAX)"}</div>
                        <div className="text-xs text-zinc-400">Every {clamp2(autoInt(state.autoClickerLevel))}s (‚âà {autoPerMin(state.autoClickerLevel)}/min)</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${
                        state.autoClickerLevel>=6 ? "bg-zinc-700 cursor-not-allowed" :
                        (state.points>=costAuto(state.autoClickerLevel) ? "btn-fuchsia" : "bg-zinc-700 cursor-not-allowed")
                      }`} onClick={upgradeAuto}>
                        {state.autoClickerLevel>=6 ? "Maximum" : `Upgrade (${fmt(costAuto(state.autoClickerLevel))})`}
                      </button>
                    </div>

                    <div className="mt-3 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Auto-Opener Rate Lv {state.autoOpenerLevel} ‚Äî {openRate(state.autoOpenerLevel)} per batch</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${state.points>=costRate(state.autoOpenerLevel) ? "btn-emerald" : "bg-zinc-700 cursor-not-allowed"}`} onClick={upgradeRate}>
                        Upgrade ({fmt(costRate(state.autoOpenerLevel))})
                      </button>
                    </div>

                    <div className="mt-3 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Auto-Opener Speed Lv {state.autoOpenerSpeedLevel} {state.autoOpenerSpeedLevel>=3 && "(MAX)"}</div>
                        <div className="text-xs text-zinc-400">Batch every {clamp2(speedInterval(state.autoOpenerSpeedLevel))}s (Lv0: 1s ‚Üí Lv1: 0.5s ‚Üí Lv2/3: 0.25s)</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${
                        state.autoOpenerSpeedLevel>=3 ? "bg-zinc-700 cursor-not-allowed" :
                        (state.points>=costSpeed(state.autoOpenerSpeedLevel) ? "btn-amber" : "bg-zinc-700 cursor-not-allowed")
                      }`} onClick={upgradeSpeed}>
                        {state.autoOpenerSpeedLevel>=3 ? "Maximum" : `Upgrade (${fmt(costSpeed(state.autoOpenerSpeedLevel))})`}
                      </button>
                    </div>

                    <div className="mt-3 flex items-center justify-between rounded-xl p-3 chip">
                      <div>
                        <div className="font-medium">Rebirth</div>
                        <div className="text-xs text-zinc-400">Next cost: {fmt(costReb(state.rebirths))} ‚Ä¢ Equip slots: {state.rebirths + 1}</div>
                      </div>
                      <button className={`btn px-3 py-2 rounded-lg text-sm ${state.points>=costReb(state.rebirths) ? "btn-rose" : "bg-zinc-700 cursor-not-allowed"}`} onClick={rebirth}>+1 Equip</button>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
    </script>
  </body>
</html>
